
    <!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Colight</title>
    </head>
    <body>
        
    <div class="bg-white p3" id="colight-widget-d506f5b728294f9687415a048dc2abd7"></div>

    <script type="application/x-colight" data-target="colight-widget-d506f5b728294f9687415a048dc2abd7">
        Q09MSUdIVAABAAAAAAAAAGAAAAAAAAAAzW4AAAAAAAAwbwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAeyJhc3QiOlt7Il9fdHlwZV9fIjoianNfcmVmIiwicGF0aCI6IkNvbHVtbiJ9LHt9LG51bGwsW3siX190eXBlX18iOiJqc19yZWYiLCJwYXRoIjoiU2xpZGVyIn0seyJzdGF0ZV9rZXkiOiJpbnRlbmRlZFBpeGVsQmxvY2tTaXplIiwiaW5pdCI6eyJfX3R5cGVfXyI6InJlZiIsInN0YXRlX2tleSI6ImludGVuZGVkUGl4ZWxCbG9ja1NpemUifSwicmFuZ2UiOlsyLDIwMF0sInJhbmdlRnJvbSI6bnVsbCwiZnBzIjpudWxsLCJhdXRvcGxheSI6bnVsbCwic3RlcCI6MSwidGFpbCI6ZmFsc2UsImxvb3AiOnRydWUsImxhYmVsIjpudWxsLCJzaG93VmFsdWUiOmZhbHNlLCJjb250cm9scyI6bnVsbCwiY2xhc3NOYW1lIjpudWxsLCJzdHlsZSI6bnVsbCwia2luZCI6IlNsaWRlciJ9XSxudWxsLFtbImRpdiIseyJjbGFzc05hbWUiOiJmbGV4IHNwYWNlLXgtNCBtYi00In0sW1siYnV0dG9uIix7Im9uQ2xpY2siOnsiX190eXBlX18iOiJqc19zb3VyY2UiLCJ2YWx1ZSI6IihlKSA9PiB7ICRzdGF0ZS5jdXJyZW50U2hhZGVyID0gJ3BpeGVsYXRlJzsgfSIsInBhcmFtcyI6W10sImV4cHJlc3Npb24iOnRydWV9LCJjbGFzc05hbWUiOiJweC00IHB5LTIgcm91bmRlZCBib3JkZXIgaG92ZXI6YmctZ3JheS0yMDAgZGF0YS1bc2VsZWN0ZWQ9dHJ1ZV06YmctYmx1ZS01MDAgZGF0YS1bc2VsZWN0ZWQ9dHJ1ZV06dGV4dC13aGl0ZSIsImRhdGEtc2VsZWN0ZWQiOnsiX190eXBlX18iOiJqc19zb3VyY2UiLCJ2YWx1ZSI6IiRzdGF0ZS5jdXJyZW50U2hhZGVyID09PSAncGl4ZWxhdGUnIiwicGFyYW1zIjpbXSwiZXhwcmVzc2lvbiI6dHJ1ZX19LCJQaXhlbGF0ZSAoMSB0aHJlYWQgcGVyIHdvcmtncm91cCkiXSxbImJ1dHRvbiIseyJvbkNsaWNrIjp7Il9fdHlwZV9fIjoianNfc291cmNlIiwidmFsdWUiOiIoZSkgPT4geyAkc3RhdGUuY3VycmVudFNoYWRlciA9ICd3b3JrZ3JvdXBfdGhyZWFkc19waXhlbGF0ZSc7IH0iLCJwYXJhbXMiOltdLCJleHByZXNzaW9uIjp0cnVlfSwiY2xhc3NOYW1lIjoicHgtNCBweS0yIHJvdW5kZWQgYm9yZGVyIGhvdmVyOmJnLWdyYXktMjAwIGRhdGEtW3NlbGVjdGVkPXRydWVdOmJnLWJsdWUtNTAwIGRhdGEtW3NlbGVjdGVkPXRydWVdOnRleHQtd2hpdGUiLCJkYXRhLXNlbGVjdGVkIjp7Il9fdHlwZV9fIjoianNfc291cmNlIiwidmFsdWUiOiIkc3RhdGUuY3VycmVudFNoYWRlciA9PT0gJ3dvcmtncm91cF90aHJlYWRzX3BpeGVsYXRlJyIsInBhcmFtcyI6W10sImV4cHJlc3Npb24iOnRydWV9fSwiUGl4ZWxhdGUgKDE2eDE2IHRocmVhZHMgcGVyIHdvcmtncm91cCkiXSxbImJ1dHRvbiIseyJvbkNsaWNrIjp7Il9fdHlwZV9fIjoianNfc291cmNlIiwidmFsdWUiOiIoZSkgPT4geyAkc3RhdGUuY3VycmVudFNoYWRlciA9ICdpbnZlcnQnOyB9IiwicGFyYW1zIjpbXSwiZXhwcmVzc2lvbiI6dHJ1ZX0sImNsYXNzTmFtZSI6InB4LTQgcHktMiByb3VuZGVkIGJvcmRlciBob3ZlcjpiZy1ncmF5LTIwMCBkYXRhLVtzZWxlY3RlZD10cnVlXTpiZy1ibHVlLTUwMCBkYXRhLVtzZWxlY3RlZD10cnVlXTp0ZXh0LXdoaXRlIiwiZGF0YS1zZWxlY3RlZCI6eyJfX3R5cGVfXyI6ImpzX3NvdXJjZSIsInZhbHVlIjoiJHN0YXRlLmN1cnJlbnRTaGFkZXIgPT09ICdpbnZlcnQnIiwicGFyYW1zIjpbXSwiZXhwcmVzc2lvbiI6dHJ1ZX19LCJJbnZlcnQiXV1dLFt7Il9fdHlwZV9fIjoianNfc291cmNlIiwidmFsdWUiOiJXZWJHUFVWaWRlb1ZpZXciLCJwYXJhbXMiOltdLCJleHByZXNzaW9uIjp0cnVlfSx7InRyYW5zZm9ybSI6eyJfX3R5cGVfXyI6ImpzX3NvdXJjZSIsInZhbHVlIjoiJHN0YXRlLmdldEN1cnJlbnRTaGFkZXIoKSIsInBhcmFtcyI6W10sImV4cHJlc3Npb24iOnRydWV9LCJzaG93U291cmNlVmlkZW8iOnRydWUsInVuaWZvcm1zIjp7Il9fdHlwZV9fIjoianNfc291cmNlIiwidmFsdWUiOiJbJHN0YXRlLnRpbnRbMF0sICRzdGF0ZS50aW50WzFdLCAkc3RhdGUudGludFsyXSwgJHN0YXRlLnBpeGVsQmxvY2tTaXplXSIsInBhcmFtcyI6W10sImV4cHJlc3Npb24iOnRydWV9LCJ3aWR0aCI6eyJfX3R5cGVfXyI6ImpzX3NvdXJjZSIsInZhbHVlIjoiJHN0YXRlLndpZHRoIiwicGFyYW1zIjpbXSwiZXhwcmVzc2lvbiI6dHJ1ZX0sImhlaWdodCI6eyJfX3R5cGVfXyI6ImpzX3NvdXJjZSIsInZhbHVlIjoiJHN0YXRlLmhlaWdodCIsInBhcmFtcyI6W10sImV4cHJlc3Npb24iOnRydWV9fV0sW3siX190eXBlX18iOiJqc19zb3VyY2UiLCJ2YWx1ZSI6ImNvbG9yU2NydWJiZXIiLCJwYXJhbXMiOltdLCJleHByZXNzaW9uIjp0cnVlfSx7InZhbHVlIjp7Il9fdHlwZV9fIjoianNfc291cmNlIiwidmFsdWUiOiIkc3RhdGUudGludCB8fCBbMCwwLDBdIiwicGFyYW1zIjpbXSwiZXhwcmVzc2lvbiI6dHJ1ZX0sIm9uSW5wdXQiOnsiX190eXBlX18iOiJqc19zb3VyY2UiLCJ2YWx1ZSI6IihlKSA9PiB7ICRzdGF0ZS50aW50ID0gZS50YXJnZXQudmFsdWU7IH0iLCJwYXJhbXMiOltdLCJleHByZXNzaW9uIjp0cnVlfX1dXV0sImlkIjoiY29saWdodC13aWRnZXQtZDUwNmY1YjcyODI5NGY5Njg3NDE1YTA0OGRjMmFiZDciLCJzdGF0ZSI6eyJpbnRlbmRlZFBpeGVsQmxvY2tTaXplIjo4LCJ3aWR0aCI6NjQwLCJoZWlnaHQiOjQ4MCwidGludCI6WzEuMCwxLjAsMS4wXSwicGl4ZWxCbG9ja1NpemUiOnsiX190eXBlX18iOiJqc19zb3VyY2UiLCJ2YWx1ZSI6IlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB3ID0gJHN0YXRlLndpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1CbG9ja3MgPSBNYXRoLmNlaWwody8kc3RhdGUuaW50ZW5kZWRQaXhlbEJsb2NrU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB3L251bUJsb2NrcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIiwicGFyYW1zIjpbXSwiZXhwcmVzc2lvbiI6ZmFsc2V9LCJjdXJyZW50U2hhZGVyIjoicGl4ZWxhdGUiLCJnZXRDdXJyZW50U2hhZGVyIjp7Il9fdHlwZV9fIjoianNfc291cmNlIiwidmFsdWUiOiIoKSA9PiAkc3RhdGUuc2hhZGVyc1skc3RhdGUuY3VycmVudFNoYWRlcl0iLCJwYXJhbXMiOltdLCJleHByZXNzaW9uIjp0cnVlfSwic2hhZGVycyI6eyJwaXhlbGF0ZSI6eyJzaGFkZXIiOiJcbi8vIFRleHR1cmUgYmluZGluZ3MgZm9yIGlucHV0L291dHB1dCBhbmQgdW5pZm9ybSBidWZmZXJcbi8vIHVuaWZvcm1zLncgY29udGFpbnMgdGhlIHBpeGVsIGJsb2NrIHNpemVcbkBncm91cCgwKSBAYmluZGluZygwKSB2YXIgaW5wdXRUZXg6IHRleHR1cmVfMmQ8ZjMyPjtcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXIgb3V0cHV0VGV4OiB0ZXh0dXJlX3N0b3JhZ2VfMmQ8cmdiYTh1bm9ybSwgd3JpdGU+O1xuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiB1bmlmb3JtczogdmVjNDxmMzI+O1xuXG4vLyBFYWNoIHdvcmtncm91cCBoYW5kbGVzIG9uZSBwaXhlbCBibG9ja1xuQGNvbXB1dGUgQHdvcmtncm91cF9zaXplKDEsIDEpXG5mbiBtYWluKFxuICAgIEBidWlsdGluKGdsb2JhbF9pbnZvY2F0aW9uX2lkKSBnbG9iYWxfaWQgOiB2ZWMzPHUzMj4sXG4gICAgQGJ1aWx0aW4obG9jYWxfaW52b2NhdGlvbl9pZCkgbG9jYWxfaWQgOiB2ZWMzPHUzMj4sXG4gICAgQGJ1aWx0aW4od29ya2dyb3VwX2lkKSBncm91cF9pZCA6IHZlYzM8dTMyPlxuKSB7XG4gICAgbGV0IGRpbXMgPSB0ZXh0dXJlRGltZW5zaW9ucyhpbnB1dFRleCk7XG5cbiAgICAvLyBFeHRyYWN0IHRpbnQgYW5kIGJsb2NrIHNpemUgZnJvbSB1bmlmb3Jtc1xuICAgIGxldCB0aW50ID0gdmVjNDxmMzI+KHVuaWZvcm1zLngsIHVuaWZvcm1zLnksIHVuaWZvcm1zLnosIDEuMCk7XG4gICAgbGV0IGJsb2NrU2l6ZSA9IG1heCgyLjAsIHVuaWZvcm1zLncpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIG51bWJlciBvZiBibG9ja3MgbmVlZGVkIHRvIGNvdmVyIHRoZSBpbWFnZVxuICAgIGxldCBudW1CbG9ja3NYID0gY2VpbChmMzIoZGltcy54KSAvIGJsb2NrU2l6ZSk7XG4gICAgbGV0IG51bUJsb2Nrc1kgPSBjZWlsKGYzMihkaW1zLnkpIC8gYmxvY2tTaXplKTtcblxuICAgIC8vIENhbGN1bGF0ZSBub3JtYWxpemVkIGJsb2NrIHNpemUgdG8gZW5zdXJlIGV2ZW4gY292ZXJhZ2VcbiAgICBsZXQgbm9ybWFsaXplZEJsb2NrU2l6ZVggPSBmMzIoZGltcy54KSAvIG51bUJsb2Nrc1g7XG4gICAgbGV0IG5vcm1hbGl6ZWRCbG9ja1NpemVZID0gZjMyKGRpbXMueSkgLyBudW1CbG9ja3NZO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGJsb2NrIGNvb3JkaW5hdGVzIHVzaW5nIG5vcm1hbGl6ZWQgc2l6ZXNcbiAgICBsZXQgYmxvY2tYID0gdTMyKHJvdW5kKGYzMihncm91cF9pZC54KSAqIG5vcm1hbGl6ZWRCbG9ja1NpemVYKSk7XG4gICAgbGV0IGJsb2NrWSA9IHUzMihyb3VuZChmMzIoZ3JvdXBfaWQueSkgKiBub3JtYWxpemVkQmxvY2tTaXplWSkpO1xuXG4gICAgLy8gU2tpcCBpZiB0aGlzIGJsb2NrIGlzIGNvbXBsZXRlbHkgb3V0c2lkZSB0ZXh0dXJlIGJvdW5kc1xuICAgIGlmIChibG9ja1ggPj0gZGltcy54IHx8IGJsb2NrWSA+PSBkaW1zLnkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSBibG9jayBib3VuZGFyaWVzIHVzaW5nIG5vcm1hbGl6ZWQgc2l6ZXNcbiAgICBsZXQgYmxvY2tFbmRYID0gbWluKHUzMihyb3VuZChmMzIoZ3JvdXBfaWQueCArIDF1KSAqIG5vcm1hbGl6ZWRCbG9ja1NpemVYKSksIGRpbXMueCk7XG4gICAgbGV0IGJsb2NrRW5kWSA9IG1pbih1MzIocm91bmQoZjMyKGdyb3VwX2lkLnkgKyAxdSkgKiBub3JtYWxpemVkQmxvY2tTaXplWSkpLCBkaW1zLnkpO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2UgY29sb3IgZm9yIHRoaXMgYmxvY2tcbiAgICB2YXIgYXZnQ29sb3IgPSB2ZWM0PGYzMj4oMC4wKTtcbiAgICB2YXIgY291bnQgPSAwdTtcblxuICAgIC8vIFN1bSB1cCBhbGwgcGl4ZWxzIGluIHRoaXMgYmxvY2tcbiAgICBmb3IgKHZhciB5ID0gYmxvY2tZOyB5IDwgYmxvY2tFbmRZOyB5KyspIHtcbiAgICAgICAgZm9yICh2YXIgeCA9IGJsb2NrWDsgeCA8IGJsb2NrRW5kWDsgeCsrKSB7XG4gICAgICAgICAgICBhdmdDb2xvciArPSB0ZXh0dXJlTG9hZChpbnB1dFRleCwgdmVjMjxpMzI+KGkzMih4KSwgaTMyKHkpKSwgMCk7XG4gICAgICAgICAgICBjb3VudCArPSAxdTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFwcGx5IGF2ZXJhZ2UgY29sb3IgdG8gYWxsIHBpeGVscyBpbiB0aGlzIGJsb2NrXG4gICAgaWYgKGNvdW50ID4gMHUpIHtcbiAgICAgICAgYXZnQ29sb3IgPSAoYXZnQ29sb3IgLyBmMzIoY291bnQpKSAqIHRpbnQ7XG5cbiAgICAgICAgLy8gV3JpdGUgdGhlIGF2ZXJhZ2VkIGNvbG9yIHRvIGFsbCBwaXhlbHMgaW4gdGhpcyBibG9ja1xuICAgICAgICBmb3IgKHZhciB5ID0gYmxvY2tZOyB5IDwgYmxvY2tFbmRZOyB5KyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIHggPSBibG9ja1g7IHggPCBibG9ja0VuZFg7IHgrKykge1xuICAgICAgICAgICAgICAgIC8vIEZvciB0aGUgZmlyc3QgcGl4ZWwgb2YgZWFjaCBibG9jaywgZHJhdyBpbiBicmlnaHQgcmVkXG4gICAgICAgICAgICAgICAgaWYgKHggPT0gYmxvY2tYICYmIHkgPT0gYmxvY2tZKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVTdG9yZShvdXRwdXRUZXgsIHZlYzI8aTMyPihpMzIoeCksIGkzMih5KSksIHZlYzQ8ZjMyPigxLjAsIDAuMCwgMC4wLCAxLjApKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlU3RvcmUob3V0cHV0VGV4LCB2ZWMyPGkzMj4oaTMyKHgpLCBpMzIoeSkpLCBhdmdDb2xvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIiwiY3VzdG9tRGlzcGF0Y2giOnsiX190eXBlX18iOiJqc19zb3VyY2UiLCJ2YWx1ZSI6IltNYXRoLmNlaWwoJHN0YXRlLndpZHRoIC8gJHN0YXRlLnBpeGVsQmxvY2tTaXplKSwgTWF0aC5jZWlsKCRzdGF0ZS5oZWlnaHQgLyAkc3RhdGUucGl4ZWxCbG9ja1NpemUpXSIsInBhcmFtcyI6W10sImV4cHJlc3Npb24iOnRydWV9LCJ3b3JrZ3JvdXBTaXplIjpbMSwxXX0sImludmVydCI6eyJzaGFkZXIiOiJcbkBncm91cCgwKSBAYmluZGluZygwKSB2YXIgaW5wdXRUZXg6IHRleHR1cmVfMmQ8ZjMyPjtcbkBncm91cCgwKSBAYmluZGluZygxKSB2YXIgb3V0cHV0VGV4OiB0ZXh0dXJlX3N0b3JhZ2VfMmQ8cmdiYTh1bm9ybSwgd3JpdGU+O1xuQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiB0aW50OiB2ZWM0PGYzMj47XG5cbkBjb21wdXRlIEB3b3JrZ3JvdXBfc2l6ZSgxNiwgMTYpXG5mbiBtYWluKEBidWlsdGluKGdsb2JhbF9pbnZvY2F0aW9uX2lkKSBnaWQgOiB2ZWMzPHUzMj4pIHtcbiAgbGV0IGRpbXMgPSB0ZXh0dXJlRGltZW5zaW9ucyhpbnB1dFRleCk7XG4gIGlmIChnaWQueCA+PSBkaW1zLnggfHwgZ2lkLnkgPj0gZGltcy55KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBzcmNDb2xvciA9IHRleHR1cmVMb2FkKGlucHV0VGV4LCB2ZWMyPGkzMj4oZ2lkLnh5KSwgMCk7XG4gIC8vIHNpbXBsZSBpbnZlcnQgZm9sbG93ZWQgYnkgdGludGluZ1xuICBsZXQgaW52ZXJ0ZWRDb2xvciA9IHZlYzQ8ZjMyPigxLjAgLSBzcmNDb2xvci5yLCAxLjAgLSBzcmNDb2xvci5nLCAxLjAgLSBzcmNDb2xvci5iLCAxLjApO1xuICBsZXQgdGludGVkQ29sb3IgPSBpbnZlcnRlZENvbG9yICogdGludDtcbiAgdGV4dHVyZVN0b3JlKG91dHB1dFRleCwgdmVjMjxpMzI+KGdpZC54eSksIHRpbnRlZENvbG9yKTtcbn1cbiJ9LCJ3b3JrZ3JvdXBfdGhyZWFkc19waXhlbGF0ZSI6eyJzaGFkZXIiOiJcbi8vIFNoYWRlciB3aGVyZSBlYWNoIHRocmVhZCBpbmRlcGVuZGVudGx5IHByb2Nlc3NlcyBpdHMgb3duIHJlZ2lvbiBvZiBwaXhlbHMuXG4vLyBVc2luZyB3b3JrZ3JvdXBfc2l6ZSgxNiwxNikgbWVhbnMgd2UgbGF1bmNoIDE2eDE2PTI1NiB0aHJlYWRzIHBlciB3b3JrZ3JvdXAuXG4vLyBFYWNoIHRocmVhZCBjYWxjdWxhdGVzIGl0cyBvd24gdW5pcXVlIHJlZ2lvbiBiYXNlZCBvbiBpdHMgZ2xvYmFsX2lkLlxuQGdyb3VwKDApIEBiaW5kaW5nKDApIHZhciBpbnB1dFRleDogdGV4dHVyZV8yZDxmMzI+O1xuQGdyb3VwKDApIEBiaW5kaW5nKDEpIHZhciBvdXRwdXRUZXg6IHRleHR1cmVfc3RvcmFnZV8yZDxyZ2JhOHVub3JtLCB3cml0ZT47XG5AZ3JvdXAoMCkgQGJpbmRpbmcoMikgdmFyPHVuaWZvcm0+IHVuaWZvcm1zOiB2ZWM0PGYzMj47XG5cbkBjb21wdXRlIEB3b3JrZ3JvdXBfc2l6ZSgxNiwgMTYpXG5mbiBtYWluKFxuICAgIEBidWlsdGluKGdsb2JhbF9pbnZvY2F0aW9uX2lkKSBnbG9iYWxfaWQgOiB2ZWMzPHUzMj4sICAvLyBVbmlxdWUgSUQgZm9yIHRoaXMgdGhyZWFkIGFjcm9zcyBhbGwgd29ya2dyb3Vwc1xuICAgIEBidWlsdGluKHdvcmtncm91cF9pZCkgd29ya2dyb3VwX2lkIDogdmVjMzx1MzI+ICAgICAgICAvLyBJRCBvZiB0aGlzIHRocmVhZCdzIHdvcmtncm91cFxuKSB7XG4gICAgbGV0IGRpbXMgPSB0ZXh0dXJlRGltZW5zaW9ucyhpbnB1dFRleCk7XG5cbiAgICAvLyBCbG9jayBzaXplIGNvbnRyb2xsZWQgYnkgdGhlIHNsaWRlclxuICAgIGxldCBibG9ja1NpemUgPSBtYXgoMi4wLCB1bmlmb3Jtcy53KTtcbiAgICBsZXQgdGludCA9IHZlYzQ8ZjMyPih1bmlmb3Jtcy54LCB1bmlmb3Jtcy55LCB1bmlmb3Jtcy56LCAxLjApO1xuXG4gICAgLy8gRmlyc3QgY2FsY3VsYXRlIGhvdyBtYW55IGJsb2NrcyB3ZSBuZWVkIHRvdGFsIHRvIGNvdmVyIHRoZSBpbWFnZVxuICAgIGxldCBudW1CbG9ja3NYID0gY2VpbChmMzIoZGltcy54KSAvIGJsb2NrU2l6ZSk7XG4gICAgbGV0IG51bUJsb2Nrc1kgPSBjZWlsKGYzMihkaW1zLnkpIC8gYmxvY2tTaXplKTtcblxuICAgIC8vIFRoZW4gY2FsY3VsYXRlIHRoZSBhY3R1YWwgc2l6ZSBlYWNoIGJsb2NrIHNob3VsZCBiZSB0byBlbnN1cmUgZXZlbiBjb3ZlcmFnZVxuICAgIC8vIFRoaXMgcHJldmVudHMgdW5ldmVuIGJsb2NrcyBhdCB0aGUgZWRnZXNcbiAgICBsZXQgbm9ybWFsaXplZEJsb2NrU2l6ZVggPSBmMzIoZGltcy54KSAvIG51bUJsb2Nrc1g7XG4gICAgbGV0IG5vcm1hbGl6ZWRCbG9ja1NpemVZID0gZjMyKGRpbXMueSkgLyBudW1CbG9ja3NZO1xuXG4gICAgLy8gRWFjaCB0aHJlYWQgdXNlcyBpdHMgZ2xvYmFsX2lkIHRvIGRldGVybWluZSB3aGljaCBibG9jayBpdCBvd25zXG4gICAgLy8gZ2xvYmFsX2lkIGVuc3VyZXMgZWFjaCB0aHJlYWQgcHJvY2Vzc2VzIGEgdW5pcXVlIHJlZ2lvbiB3aXRoIG5vIG92ZXJsYXBcbiAgICBsZXQgYmxvY2tYID0gdTMyKHJvdW5kKGYzMihnbG9iYWxfaWQueCkgKiBub3JtYWxpemVkQmxvY2tTaXplWCkpO1xuICAgIGxldCBibG9ja1kgPSB1MzIocm91bmQoZjMyKGdsb2JhbF9pZC55KSAqIG5vcm1hbGl6ZWRCbG9ja1NpemVZKSk7XG5cbiAgICAvLyBTa2lwIGlmIHRoaXMgdGhyZWFkJ3MgYmxvY2sgaXMgb3V0c2lkZSB0aGUgdGV4dHVyZVxuICAgIGlmIChibG9ja1ggPj0gZGltcy54IHx8IGJsb2NrWSA+PSBkaW1zLnkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB3aGVyZSB0aGlzIHRocmVhZCdzIGJsb2NrIGVuZHMgYnkgbG9va2luZyBhdCB3aGVyZSB0aGUgbmV4dCB0aHJlYWQgd291bGQgc3RhcnRcbiAgICBsZXQgbmV4dEJsb2NrWCA9IHUzMihyb3VuZChmMzIoZ2xvYmFsX2lkLnggKyAxdSkgKiBub3JtYWxpemVkQmxvY2tTaXplWCkpO1xuICAgIGxldCBuZXh0QmxvY2tZID0gdTMyKHJvdW5kKGYzMihnbG9iYWxfaWQueSArIDF1KSAqIG5vcm1hbGl6ZWRCbG9ja1NpemVZKSk7XG4gICAgbGV0IGJsb2NrRW5kWCA9IG1pbihuZXh0QmxvY2tYLCBkaW1zLngpO1xuICAgIGxldCBibG9ja0VuZFkgPSBtaW4obmV4dEJsb2NrWSwgZGltcy55KTtcblxuICAgIC8vIEVhY2ggdGhyZWFkIGNhbGN1bGF0ZXMgYXZlcmFnZSBjb2xvciBmb3IgaXRzIG93biBibG9jayBvZiBwaXhlbHNcbiAgICB2YXIgc3VtID0gdmVjNDxmMzI+KDAuMCk7XG4gICAgdmFyIGNvdW50ID0gMHU7XG5cbiAgICAvLyBTdW0gdXAgYWxsIHBpeGVscyBpbiB0aGlzIHRocmVhZCdzIGJsb2NrXG4gICAgZm9yICh2YXIgeSA9IGJsb2NrWTsgeSA8IGJsb2NrRW5kWTsgeSsrKSB7XG4gICAgICAgIGZvciAodmFyIHggPSBibG9ja1g7IHggPCBibG9ja0VuZFg7IHgrKykge1xuICAgICAgICAgICAgc3VtICs9IHRleHR1cmVMb2FkKGlucHV0VGV4LCB2ZWMyPGkzMj4oaTMyKHgpLCBpMzIoeSkpLCAwKTtcbiAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgY29sb3IgZm9yIHRoaXMgdGhyZWFkJ3MgYmxvY2tcbiAgICBsZXQgYXZnQ29sb3IgPSAoc3VtIC8gZjMyKGNvdW50KSkgKiB0aW50O1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyB0aHJlYWQgaXMgYXQgdGhlIHRvcC1sZWZ0IG9mIGl0cyB3b3JrZ3JvdXAgKGV2ZXJ5IDE2dGggdGhyZWFkKVxuICAgIGxldCBpc1dvcmtncm91cFRvcExlZnQgPSAoZ2xvYmFsX2lkLnggJSAxNnUgPT0gMHUgJiYgZ2xvYmFsX2lkLnkgJSAxNnUgPT0gMHUpO1xuXG4gICAgLy8gRWFjaCB0aHJlYWQgd3JpdGVzIGl0cyBhdmVyYWdlZCBjb2xvciB0byBpdHMgb3duIGJsb2NrIG9mIHBpeGVsc1xuICAgIGZvciAodmFyIHkgPSBibG9ja1k7IHkgPCBibG9ja0VuZFk7IHkrKykge1xuICAgICAgICBmb3IgKHZhciB4ID0gYmxvY2tYOyB4IDwgYmxvY2tFbmRYOyB4KyspIHtcbiAgICAgICAgICAgIGlmIChpc1dvcmtncm91cFRvcExlZnQpIHtcbiAgICAgICAgICAgICAgICAvLyBEcmF3IDR4NCByZWQgc3F1YXJlIGF0IHdvcmtncm91cCBib3VuZGFyaWVzXG4gICAgICAgICAgICAgICAgaWYgKHggPCBibG9ja1ggKyA0dSAmJiB5IDwgYmxvY2tZICsgNHUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZVN0b3JlKG91dHB1dFRleCwgdmVjMjxpMzI+KGkzMih4KSwgaTMyKHkpKSwgdmVjNDxmMzI+KDEuMCwgMC4wLCAwLjAsIDEuMCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVTdG9yZShvdXRwdXRUZXgsIHZlYzI8aTMyPihpMzIoeCksIGkzMih5KSksIGF2Z0NvbG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHggPT0gYmxvY2tYICYmIHkgPT0gYmxvY2tZKSB7XG4gICAgICAgICAgICAgICAgLy8gRHJhdyAyeDIgcmVkIHNxdWFyZSBmb3IgaW5kaXZpZHVhbCB0aHJlYWQgYmxvY2sgY29ybmVyc1xuICAgICAgICAgICAgICAgIGlmICh4IDwgYmxvY2tYICsgMnUgJiYgeSA8IGJsb2NrWSArIDJ1KSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmVTdG9yZShvdXRwdXRUZXgsIHZlYzI8aTMyPihpMzIoeCksIGkzMih5KSksIHZlYzQ8ZjMyPigxLjAsIDAuMCwgMC4wLCAxLjApKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlU3RvcmUob3V0cHV0VGV4LCB2ZWMyPGkzMj4oaTMyKHgpLCBpMzIoeSkpLCBhdmdDb2xvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlU3RvcmUob3V0cHV0VGV4LCB2ZWMyPGkzMj4oaTMyKHgpLCBpMzIoeSkpLCBhdmdDb2xvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJ3b3JrZ3JvdXBTaXplIjpbMTYsMTZdfX19LCJzeW5jZWRLZXlzIjpbXSwibGlzdGVuZXJzIjp7fSwiaW1wb3J0cyI6W3siZm9ybWF0IjoiZXNtIiwic291cmNlIjoiLy8gLS0tLS0gXCJ3ZWJncHVWaWRlb0NvbXB1dGUuanNcIiAtLS0tLVxuLy9cbi8vIEEgUmVhY3QgY29tcG9uZW50IHRoYXQgcHJvY2Vzc2VzIHdlYmNhbSB2aWRlbyB0aHJvdWdoIGEgV2ViR1BVIGNvbXB1dGUgc2hhZGVyLlxuLy8gVGhlIHVzZXIgcHJvdmlkZXMgdGhlIFdHU0wgY29tcHV0ZSBzaGFkZXIgY29kZSBhcyBhIHN0cmluZyBwcm9wLlxuLy9cbi8vIFByb3BzOlxuLy8gLSB0cmFuc2Zvcm06IE9iamVjdCBjb250YWluaW5nOlxuLy8gICAtIHNoYWRlcjogV0dTTCBjb21wdXRlIHNoYWRlciBjb2RlIGFzIGEgc3RyaW5nXG4vLyAgIC0gd29ya2dyb3VwU2l6ZTogQXJyYXkgd2l0aCB0d28gZWxlbWVudHMgW3gsIHldIGZvciBjb21wdXRlIHNoYWRlciB3b3JrZ3JvdXAgc2l6ZSAoZGVmYXVsdDogWzgsIDhdKVxuLy8gICAtIGRpc3BhdGNoU2NhbGU6IE11bHRpcGxpZXIgZm9yIHdvcmtncm91cCBkaXNwYXRjaCBjYWxjdWxhdGlvbiAoZGVmYXVsdDogMSlcbi8vICAgLSBjdXN0b21EaXNwYXRjaDogQXJyYXkgd2l0aCB0d28gZWxlbWVudHMgW3gsIHldIGZvciBkaXJlY3Qgd29ya2dyb3VwIGNvdW50IGNvbnRyb2wgKGRlZmF1bHQ6IG51bGwpXG4vLyAtIHdpZHRoOiBDYW52YXMgd2lkdGggKGRlZmF1bHQ6IDY0MClcbi8vIC0gaGVpZ2h0OiBDYW52YXMgaGVpZ2h0IChkZWZhdWx0OiA0ODApXG4vLyAtIHNob3dTb3VyY2VWaWRlbzogV2hldGhlciB0byBzaG93IHRoZSBzb3VyY2UgdmlkZW8gKGRlZmF1bHQ6IGZhbHNlKVxuLy8gLSB1bmlmb3JtczogQW4gb2JqZWN0IG9mIHVuaWZvcm1zIHRvIGJlIGNvcGllZCBpbnRvIHRoZSBXZWJHUFUgY29udGV4dCBhbmQgYXZhaWxhYmxlIGluIHRoZSBjb21wdXRlIHNoYWRlclxuLy8gLSBkZWJ1ZzogRW5hYmxlIGRlYnVnIGxvZ2dpbmcgKGRlZmF1bHQ6IGZhbHNlKVxuLy9cbi8vIFRoZSBjb21wdXRlIHNoYWRlciBzaG91bGQ6XG4vLyAtIFVzZSBAZ3JvdXAoMCkgQGJpbmRpbmcoMCkgZm9yIHRoZSBpbnB1dCB0ZXh0dXJlICh0ZXh0dXJlXzJkPGYzMj4pXG4vLyAtIFVzZSBAZ3JvdXAoMCkgQGJpbmRpbmcoMSkgZm9yIHRoZSBvdXRwdXQgdGV4dHVyZSAodGV4dHVyZV9zdG9yYWdlXzJkPHJnYmE4dW5vcm0sIHdyaXRlPilcbi8vIC0gVXNlIEBncm91cCgwKSBAYmluZGluZygyKSBmb3IgdGhlIHVuaWZvcm0gYnVmZmVyIGNvbnRhaW5pbmcgdGhlIHVuaWZvcm1zXG4vLyAtIEhhdmUgYSBtYWluKCkgZnVuY3Rpb24gd2l0aCBAY29tcHV0ZSBAd29ya2dyb3VwX3NpemUoeCwgeSkgZGVjb3JhdG9yIG1hdGNoaW5nIHdvcmtncm91cFNpemUgcHJvcFxuLy8gLSBUYWtlIGEgQGJ1aWx0aW4oZ2xvYmFsX2ludm9jYXRpb25faWQpIHBhcmFtZXRlciB0byBnZXQgcGl4ZWwgY29vcmRpbmF0ZXNcbi8vIC0gQ2hlY2sgdGV4dHVyZSBib3VuZHMgYmVmb3JlIHByb2Nlc3NpbmcgcGl4ZWxzXG4vL1xuLy8gRXhhbXBsZSBjb21wdXRlIHNoYWRlcjpcbi8vXG4vLyBAZ3JvdXAoMCkgQGJpbmRpbmcoMCkgdmFyIGlucHV0VGV4IDogdGV4dHVyZV8yZDxmMzI+O1xuLy8gQGdyb3VwKDApIEBiaW5kaW5nKDEpIHZhciBvdXRwdXRUZXggOiB0ZXh0dXJlX3N0b3JhZ2VfMmQ8cmdiYTh1bm9ybSwgd3JpdGU+O1xuLy8gQGdyb3VwKDApIEBiaW5kaW5nKDIpIHZhcjx1bmlmb3JtPiB1bmlmb3JtczogTXlVbmlmb3Jtcztcbi8vXG4vLyBAY29tcHV0ZSBAd29ya2dyb3VwX3NpemUoOCwgOClcbi8vIGZuIG1haW4oQGJ1aWx0aW4oZ2xvYmFsX2ludm9jYXRpb25faWQpIGdpZCA6IHZlYzM8dTMyPikge1xuLy8gICBsZXQgZGltcyA9IHRleHR1cmVEaW1lbnNpb25zKGlucHV0VGV4KTtcbi8vICAgaWYgKGdpZC54ID49IGRpbXMueCB8fCBnaWQueSA+PSBkaW1zLnkpIHsgcmV0dXJuOyB9XG4vL1xuLy8gICBsZXQgc3JjQ29sb3IgPSB0ZXh0dXJlTG9hZChpbnB1dFRleCwgdmVjMjxpMzI+KGdpZC54eSksIDApO1xuLy8gICAvLyBQcm9jZXNzIHNyY0NvbG9yIGhlcmUuLi5cbi8vICAgdGV4dHVyZVN0b3JlKG91dHB1dFRleCwgdmVjMjxpMzI+KGdpZC54eSksIG91dENvbG9yKTtcbi8vIH1cblxuY29uc3QgeyBodG1sLCBSZWFjdCB9ID0gY29saWdodC5hcGk7XG5jb25zdCB7IHVzZVN0YXRlIH0gPSBSZWFjdDtcbmV4cG9ydCBjb25zdCBjb2xvclNjcnViYmVyID0gKHsgdmFsdWUsIG9uSW5wdXQgfSkgPT4ge1xuICAvLyBVc2UgaW50ZXJuYWwgc3RhdGUgaWYgbm8gZXh0ZXJuYWwgdmFsdWUgaXMgcHJvdmlkZWQgKHVuY29udHJvbGxlZCBtb2RlKVxuICBjb25zdCBbaW50ZXJuYWxDb2xvciwgc2V0SW50ZXJuYWxDb2xvcl0gPSB1c2VTdGF0ZShbMSwgMCwgMF0pO1xuICBjb25zdCBjdXJyZW50Q29sb3IgPSB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBpbnRlcm5hbENvbG9yO1xuXG4gIC8vIEhlbHBlcjogQ29udmVydCBIU0wgKHdpdGggczoxMDAlLCBsOjUwJSkgdG8gUkdCIGFycmF5XG4gIGNvbnN0IGhzbFRvUmdiID0gKGgpID0+IHtcbiAgICBoID0gaCAvIDM2MDtcbiAgICBjb25zdCBzID0gMS4wO1xuICAgIGNvbnN0IGwgPSAwLjU7XG4gICAgY29uc3QgayA9IChuKSA9PiAobiArIGggKiAxMikgJSAxMjtcbiAgICBjb25zdCBhID0gcyAqIE1hdGgubWluKGwsIDEgLSBsKTtcbiAgICBjb25zdCBmID0gKG4pID0+IGwgLSBhICogTWF0aC5tYXgoTWF0aC5taW4oayhuKSAtIDMsIDkgLSBrKG4pLCAxKSwgLTEpO1xuICAgIHJldHVybiBbZigwKSwgZig4KSwgZig0KV07XG4gIH07XG5cbiAgLy8gSGVscGVyOiBDb252ZXJ0IFJHQiBhcnJheSB0byBodWUgKDAtMzYwKVxuICBjb25zdCByZ2JUb0h1ZSA9IChyZ2IpID0+IHtcbiAgICBjb25zdCBbciwgZywgYl0gPSByZ2I7XG4gICAgY29uc3QgbWF4ID0gTWF0aC5tYXgociwgZywgYik7XG4gICAgY29uc3QgbWluID0gTWF0aC5taW4ociwgZywgYik7XG4gICAgbGV0IGg7XG4gICAgaWYgKG1heCA9PT0gbWluKSB7XG4gICAgICBoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZCA9IG1heCAtIG1pbjtcbiAgICAgIGlmIChtYXggPT09IHIpIHtcbiAgICAgICAgaCA9IChnIC0gYikgLyBkICsgKGcgPCBiID8gNiA6IDApO1xuICAgICAgfSBlbHNlIGlmIChtYXggPT09IGcpIHtcbiAgICAgICAgaCA9IChiIC0gcikgLyBkICsgMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGggPSAociAtIGcpIC8gZCArIDQ7XG4gICAgICB9XG4gICAgICBoIC89IDY7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLnJvdW5kKGggKiAzNjApO1xuICB9O1xuXG4gIC8vIExpbmVhciBncmFkaWVudCBmb3IgdGhlIHNsaWRlciBiYWNrZ3JvdW5kIHVzaW5nIFJHQiB2YWx1ZXNcbiAgY29uc3QgZ3JhZGllbnRCYWNrZ3JvdW5kID0gYGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgJHtBcnJheS5mcm9tKFxuICAgIHsgbGVuZ3RoOiAxMiB9LFxuICAgIChfLCBpKSA9PiB7XG4gICAgICBjb25zdCBbciwgZywgYl0gPSBoc2xUb1JnYihpICogMzApO1xuICAgICAgcmV0dXJuIGByZ2IoJHtyICogMjU1fSwgJHtnICogMjU1fSwgJHtiICogMjU1fSlgO1xuICAgIH0sXG4gICkuam9pbihcIiwgXCIpfSlgO1xuXG4gIGNvbnN0IGhhbmRsZUNvbG9yQ2hhbmdlID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQudHlwZSA9PT0gXCJyYW5nZVwiKSB7XG4gICAgICBjb25zdCBuZXdIdWUgPSBwYXJzZUludChlLnRhcmdldC52YWx1ZSwgMTApO1xuICAgICAgY29uc3QgbmV3Q29sb3IgPSBoc2xUb1JnYihuZXdIdWUpO1xuICAgICAgaWYgKG9uSW5wdXQpIHtcbiAgICAgICAgb25JbnB1dCh7IHRhcmdldDogeyB2YWx1ZTogbmV3Q29sb3IgfSB9KTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNldEludGVybmFsQ29sb3IobmV3Q29sb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXR1cm4gaHRtbChbXG4gICAgXCJkaXYuaC0xMC53LWZ1bGwucm91bmRlZC1mdWxsLm1iLTQub3ZlcmZsb3ctaGlkZGVuXCIsXG4gICAgeyBzdHlsZTogeyBiYWNrZ3JvdW5kOiBncmFkaWVudEJhY2tncm91bmQgfSB9LFxuICAgIFtcbiAgICAgIFwiaW5wdXRcIixcbiAgICAgIHtcbiAgICAgICAgdHlwZTogXCJyYW5nZVwiLFxuICAgICAgICBtaW46IFwiMFwiLFxuICAgICAgICBtYXg6IFwiMzYwXCIsXG4gICAgICAgIHZhbHVlOiByZ2JUb0h1ZShjdXJyZW50Q29sb3IpLFxuICAgICAgICBvbkNoYW5nZTogaGFuZGxlQ29sb3JDaGFuZ2UsXG4gICAgICAgIGNsYXNzTmFtZTogYFxuICAgICAgICB3LWZ1bGwgaC1mdWxsIGFwcGVhcmFuY2Utbm9uZSBiZy10cmFuc3BhcmVudFxuICAgICAgICBbJjo6LXdlYmtpdC1zbGlkZXItdGh1bWJdOihib3JkZXIgYXBwZWFyYW5jZS1ub25lIHJvdW5kZWQtZnVsbCBiZy13aGl0ZSB3LVsyMHB4XSBoLVsyMHB4XSlgLFxuICAgICAgfSxcbiAgICBdLFxuICBdKTtcbn07XG5cbmZ1bmN0aW9uIHNldHVwVmlkZW9DYW52YXMod2lkdGgsIGhlaWdodCwgc2hvd1NvdXJjZVZpZGVvKSB7XG4gIGNvbnN0IHZpZGVvQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgdmlkZW9DYW52YXMud2lkdGggPSB3aWR0aDtcbiAgdmlkZW9DYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICBjb25zdCB2aWRlb0N0eCA9IHZpZGVvQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICBpZiAoc2hvd1NvdXJjZVZpZGVvKSB7XG4gICAgT2JqZWN0LmFzc2lnbih2aWRlb0NhbnZhcy5zdHlsZSwge1xuICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcbiAgICAgIGJvdHRvbTogXCIxMHB4XCIsXG4gICAgICByaWdodDogXCIxMHB4XCIsXG4gICAgICBib3JkZXI6IFwiMXB4IHNvbGlkIHJlZFwiLFxuICAgICAgd2lkdGg6IFwiMTYwcHhcIixcbiAgICAgIGhlaWdodDogXCIxMjBweFwiLFxuICAgICAgekluZGV4OiBcIjEwMDBcIixcbiAgICB9KTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHZpZGVvQ2FudmFzKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdmlkZW9DYW52YXMsXG4gICAgdmlkZW9DdHgsXG4gICAgY2xlYW51cDogKCkgPT4ge1xuICAgICAgaWYgKHNob3dTb3VyY2VWaWRlbykge1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHZpZGVvQ2FudmFzKTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuXG5hc3luYyBmdW5jdGlvbiBzZXR1cFdlYmNhbShzdGF0ZSwgd2lkdGgsIGhlaWdodCkge1xuICB0cnkge1xuICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHtcbiAgICAgIHZpZGVvOiB7XG4gICAgICAgIHdpZHRoOiB7IGlkZWFsOiB3aWR0aCB9LFxuICAgICAgICBoZWlnaHQ6IHsgaWRlYWw6IGhlaWdodCB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO1xuICAgIE9iamVjdC5hc3NpZ24odmlkZW8sIHtcbiAgICAgIHNyY09iamVjdDogc3RyZWFtLFxuICAgICAgd2lkdGgsXG4gICAgICBoZWlnaHQsXG4gICAgICBhdXRvcGxheTogdHJ1ZSxcbiAgICAgIHBsYXlzSW5saW5lOiB0cnVlLFxuICAgICAgbXV0ZWQ6IHRydWUsXG4gICAgfSk7XG5cbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgdmlkZW8ub25sb2FkZWRtZXRhZGF0YSA9ICgpID0+IHZpZGVvLnBsYXkoKS50aGVuKHJlc29sdmUpO1xuICAgIH0pO1xuXG4gICAgc3RhdGUudmlkZW8gPSB2aWRlbztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiV2ViY2FtIHNldHVwIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGluaXRXZWJHUFUoc3RhdGUsIGNhbnZhc0lkKSB7XG4gIGlmICghbmF2aWdhdG9yLmdwdSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIldlYkdQVSBub3Qgc3VwcG9ydGVkXCIpO1xuICB9XG4gIGNvbnN0IGFkYXB0ZXIgPSBhd2FpdCBuYXZpZ2F0b3IuZ3B1LnJlcXVlc3RBZGFwdGVyKCk7XG4gIGlmICghYWRhcHRlcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgR1BVIGFkYXB0ZXJcIik7XG4gIH1cbiAgY29uc3QgZGV2aWNlID0gYXdhaXQgYWRhcHRlci5yZXF1ZXN0RGV2aWNlKHsgdmFsaWRhdGlvbkVuYWJsZWQ6IHRydWUgfSk7XG4gIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNhbnZhc0lkKTtcbiAgY29uc3QgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KFwid2ViZ3B1XCIpO1xuXG4gIGlmICghY29udGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBnZXQgV2ViR1BVIGNvbnRleHRcIik7XG4gIH1cblxuICBjb25zdCBmb3JtYXQgPSBuYXZpZ2F0b3IuZ3B1LmdldFByZWZlcnJlZENhbnZhc0Zvcm1hdCgpO1xuICBjb250ZXh0LmNvbmZpZ3VyZSh7XG4gICAgZGV2aWNlLFxuICAgIGZvcm1hdCxcbiAgICBhbHBoYU1vZGU6IFwicHJlbXVsdGlwbGllZFwiLFxuICB9KTtcblxuICBzdGF0ZS5kZXZpY2UgPSBkZXZpY2U7XG4gIHN0YXRlLmNvbnRleHQgPSBjb250ZXh0O1xuICBzdGF0ZS5yZW5kZXJGb3JtYXQgPSBmb3JtYXQ7XG5cbiAgcmV0dXJuIHsgZGV2aWNlLCBjb250ZXh0LCBmb3JtYXQgfTtcbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSB1bmlmb3JtIGJ1ZmZlciBmcm9tIHVuaWZvcm1zIG9iamVjdFxuZnVuY3Rpb24gY3JlYXRlVW5pZm9ybUJ1ZmZlcihkZXZpY2UsIHVuaWZvcm1zKSB7XG4gIGNvbnN0IHVuaWZvcm1LZXlzID0gT2JqZWN0LmtleXModW5pZm9ybXMpLnNvcnQoKTtcbiAgY29uc3QgdW5pZm9ybUFycmF5ID0gdW5pZm9ybUtleXMubWFwKChrZXkpID0+IHVuaWZvcm1zW2tleV0pO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgdW5pZm9ybUFycmF5Lmxlbmd0aCA+IDAgPyB1bmlmb3JtQXJyYXkgOiBbMF0sXG4gICk7XG4gIGNvbnN0IHVuaWZvcm1CdWZmZXIgPSBkZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICBzaXplOiB1bmlmb3JtRGF0YS5ieXRlTGVuZ3RoLFxuICAgIHVzYWdlOiBHUFVCdWZmZXJVc2FnZS5VTklGT1JNIHwgR1BVQnVmZmVyVXNhZ2UuQ09QWV9EU1QsXG4gICAgbWFwcGVkQXRDcmVhdGlvbjogdHJ1ZSxcbiAgfSk7XG4gIG5ldyBGbG9hdDMyQXJyYXkodW5pZm9ybUJ1ZmZlci5nZXRNYXBwZWRSYW5nZSgpKS5zZXQodW5pZm9ybURhdGEpO1xuICB1bmlmb3JtQnVmZmVyLnVubWFwKCk7XG4gIHJldHVybiB1bmlmb3JtQnVmZmVyO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gdXBkYXRlIHVuaWZvcm0gYnVmZmVyIHdpdGggbmV3IHZhbHVlc1xuZnVuY3Rpb24gdXBkYXRlVW5pZm9ybUJ1ZmZlcihkZXZpY2UsIHVuaWZvcm1CdWZmZXIsIHVuaWZvcm1zKSB7XG4gIGlmICghZGV2aWNlIHx8ICF1bmlmb3JtQnVmZmVyKSByZXR1cm47XG4gIGNvbnN0IHVuaWZvcm1LZXlzID0gT2JqZWN0LmtleXModW5pZm9ybXMpLnNvcnQoKTtcbiAgY29uc3QgdW5pZm9ybUFycmF5ID0gdW5pZm9ybUtleXMubWFwKChrZXkpID0+IHVuaWZvcm1zW2tleV0pO1xuICBjb25zdCB1bmlmb3JtRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoXG4gICAgdW5pZm9ybUFycmF5Lmxlbmd0aCA+IDAgPyB1bmlmb3JtQXJyYXkgOiBbMF0sXG4gICk7XG4gIGRldmljZS5xdWV1ZS53cml0ZUJ1ZmZlcihcbiAgICB1bmlmb3JtQnVmZmVyLFxuICAgIDAsXG4gICAgdW5pZm9ybURhdGEuYnVmZmVyLFxuICAgIHVuaWZvcm1EYXRhLmJ5dGVPZmZzZXQsXG4gICAgdW5pZm9ybURhdGEuYnl0ZUxlbmd0aCxcbiAgKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2V0dXBXZWJHUFVSZXNvdXJjZXMoXG4gIHN0YXRlLFxuICB7IHdpZHRoLCBoZWlnaHQsIGNhbnZhc0lkLCB1bmlmb3JtcyB9LFxuKSB7XG4gIGNvbnN0IHsgZGV2aWNlLCBjb250ZXh0LCBmb3JtYXQgfSA9IGF3YWl0IGluaXRXZWJHUFUoc3RhdGUsIGNhbnZhc0lkKTtcbiAgYXdhaXQgc2V0dXBXZWJjYW0oc3RhdGUsIHdpZHRoLCBoZWlnaHQpO1xuXG4gIGNvbnN0IHVzYWdlID0gR1BVVGV4dHVyZVVzYWdlO1xuICBjb25zdCB0ZXh0dXJlRm9ybWF0ID0gXCJyZ2JhOHVub3JtXCI7XG5cbiAgY29uc3QgaW5wdXRUZXh0dXJlID0gZGV2aWNlLmNyZWF0ZVRleHR1cmUoe1xuICAgIHNpemU6IFt3aWR0aCwgaGVpZ2h0XSxcbiAgICBmb3JtYXQ6IHRleHR1cmVGb3JtYXQsXG4gICAgdXNhZ2U6XG4gICAgICB1c2FnZS5DT1BZX1NSQyB8XG4gICAgICB1c2FnZS5DT1BZX0RTVCB8XG4gICAgICB1c2FnZS5URVhUVVJFX0JJTkRJTkcgfFxuICAgICAgdXNhZ2UuUkVOREVSX0FUVEFDSE1FTlQsXG4gIH0pO1xuXG4gIGNvbnN0IG91dHB1dFRleHR1cmUgPSBkZXZpY2UuY3JlYXRlVGV4dHVyZSh7XG4gICAgc2l6ZTogW3dpZHRoLCBoZWlnaHRdLFxuICAgIGZvcm1hdDogdGV4dHVyZUZvcm1hdCxcbiAgICB1c2FnZTpcbiAgICAgIHVzYWdlLlNUT1JBR0VfQklORElORyB8XG4gICAgICB1c2FnZS5URVhUVVJFX0JJTkRJTkcgfFxuICAgICAgdXNhZ2UuQ09QWV9EU1QgfFxuICAgICAgdXNhZ2UuUkVOREVSX0FUVEFDSE1FTlQsXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSByZW5kZXIgcGlwZWxpbmUgYW5kIHJlc291cmNlc1xuICBjb25zdCB2ZXJ0ZXhTaGFkZXJDb2RlID0gLyogd2dzbCAqLyBgXG4gICAgc3RydWN0IFZlcnRleE91dHB1dCB7XG4gICAgICBAYnVpbHRpbihwb3NpdGlvbikgcG9zaXRpb246IHZlYzQ8ZjMyPixcbiAgICAgIEBsb2NhdGlvbigwKSB0ZXhDb29yZDogdmVjMjxmMzI+LFxuICAgIH07XG5cbiAgICBAdmVydGV4XG4gICAgZm4gdnNNYWluKEBidWlsdGluKHZlcnRleF9pbmRleCkgdmVydGV4SW5kZXg6IHUzMikgLT4gVmVydGV4T3V0cHV0IHtcbiAgICAgIHZhciBvdXRwdXQ6IFZlcnRleE91dHB1dDtcbiAgICAgIHZhciBwb3NpdGlvbnMgPSBhcnJheTx2ZWMyPGYzMj4sIDY+KFxuICAgICAgICB2ZWMyPGYzMj4oLTEuMCwgLTEuMCksXG4gICAgICAgIHZlYzI8ZjMyPigxLjAsIC0xLjApLFxuICAgICAgICB2ZWMyPGYzMj4oLTEuMCwgMS4wKSxcbiAgICAgICAgdmVjMjxmMzI+KC0xLjAsIDEuMCksXG4gICAgICAgIHZlYzI8ZjMyPigxLjAsIC0xLjApLFxuICAgICAgICB2ZWMyPGYzMj4oMS4wLCAxLjApXG4gICAgICApO1xuICAgICAgdmFyIHRleENvb3JkcyA9IGFycmF5PHZlYzI8ZjMyPiwgNj4oXG4gICAgICAgIHZlYzI8ZjMyPigwLjAsIDEuMCksXG4gICAgICAgIHZlYzI8ZjMyPigxLjAsIDEuMCksXG4gICAgICAgIHZlYzI8ZjMyPigwLjAsIDAuMCksXG4gICAgICAgIHZlYzI8ZjMyPigwLjAsIDAuMCksXG4gICAgICAgIHZlYzI8ZjMyPigxLjAsIDEuMCksXG4gICAgICAgIHZlYzI8ZjMyPigxLjAsIDAuMClcbiAgICAgICk7XG4gICAgICBvdXRwdXQucG9zaXRpb24gPSB2ZWM0PGYzMj4ocG9zaXRpb25zW3ZlcnRleEluZGV4XSwgMC4wLCAxLjApO1xuICAgICAgb3V0cHV0LnRleENvb3JkID0gdGV4Q29vcmRzW3ZlcnRleEluZGV4XTtcbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxuICBgO1xuXG4gIGNvbnN0IGZyYWdtZW50U2hhZGVyQ29kZSA9IC8qIHdnc2wgKi8gYFxuICAgIEBncm91cCgwKSBAYmluZGluZygwKSB2YXIgbXlUZXg6IHRleHR1cmVfMmQ8ZjMyPjtcbiAgICBAZ3JvdXAoMCkgQGJpbmRpbmcoMSkgdmFyIG15U2FtcGxlcjogc2FtcGxlcjtcblxuICAgIEBmcmFnbWVudFxuICAgIGZuIGZzTWFpbihAbG9jYXRpb24oMCkgdGV4Q29vcmQ6IHZlYzI8ZjMyPikgLT4gQGxvY2F0aW9uKDApIHZlYzQ8ZjMyPiB7XG4gICAgICByZXR1cm4gdGV4dHVyZVNhbXBsZShteVRleCwgbXlTYW1wbGVyLCB0ZXhDb29yZCk7XG4gICAgfVxuICBgO1xuXG4gIGNvbnN0IHJlbmRlck1vZHVsZSA9IGRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUoe1xuICAgIGNvZGU6IHZlcnRleFNoYWRlckNvZGUgKyBmcmFnbWVudFNoYWRlckNvZGUsXG4gIH0pO1xuXG4gIGNvbnN0IHJlbmRlclBpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZVJlbmRlclBpcGVsaW5lKHtcbiAgICBsYXlvdXQ6IFwiYXV0b1wiLFxuICAgIHZlcnRleDoge1xuICAgICAgbW9kdWxlOiByZW5kZXJNb2R1bGUsXG4gICAgICBlbnRyeVBvaW50OiBcInZzTWFpblwiLFxuICAgIH0sXG4gICAgZnJhZ21lbnQ6IHtcbiAgICAgIG1vZHVsZTogcmVuZGVyTW9kdWxlLFxuICAgICAgZW50cnlQb2ludDogXCJmc01haW5cIixcbiAgICAgIHRhcmdldHM6IFt7IGZvcm1hdCB9XSxcbiAgICB9LFxuICAgIHByaW1pdGl2ZToge1xuICAgICAgdG9wb2xvZ3k6IFwidHJpYW5nbGUtbGlzdFwiLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHNhbXBsZXIgPSBkZXZpY2UuY3JlYXRlU2FtcGxlcih7XG4gICAgbWFnRmlsdGVyOiBcImxpbmVhclwiLFxuICAgIG1pbkZpbHRlcjogXCJsaW5lYXJcIixcbiAgICBhZGRyZXNzTW9kZVU6IFwiY2xhbXAtdG8tZWRnZVwiLFxuICAgIGFkZHJlc3NNb2RlVjogXCJjbGFtcC10by1lZGdlXCIsXG4gIH0pO1xuXG4gIGNvbnN0IHJlbmRlckJpbmRHcm91cCA9IGRldmljZS5jcmVhdGVCaW5kR3JvdXAoe1xuICAgIGxheW91dDogcmVuZGVyUGlwZWxpbmUuZ2V0QmluZEdyb3VwTGF5b3V0KDApLFxuICAgIGVudHJpZXM6IFtcbiAgICAgIHsgYmluZGluZzogMCwgcmVzb3VyY2U6IG91dHB1dFRleHR1cmUuY3JlYXRlVmlldygpIH0sXG4gICAgICB7IGJpbmRpbmc6IDEsIHJlc291cmNlOiBzYW1wbGVyIH0sXG4gICAgXSxcbiAgfSk7XG5cbiAgLy8gTm90ZTogQ29tcHV0ZSBwaXBlbGluZSBjcmVhdGlvbiBpcyBkZWZlcnJlZCwgYWxsb3dpbmcgaXQgdG8gYmUgc3dhcHBlZCBsYXRlclxuICBzdGF0ZS5pbnB1dFRleHR1cmUgPSBpbnB1dFRleHR1cmU7XG4gIHN0YXRlLm91dHB1dFRleHR1cmUgPSBvdXRwdXRUZXh0dXJlO1xuICBzdGF0ZS5zYW1wbGVyID0gc2FtcGxlcjtcbiAgc3RhdGUucmVuZGVyUGlwZWxpbmUgPSByZW5kZXJQaXBlbGluZTtcbiAgc3RhdGUucmVuZGVyQmluZEdyb3VwID0gcmVuZGVyQmluZEdyb3VwO1xuICBzdGF0ZS51bmlmb3JtQnVmZmVyID0gY3JlYXRlVW5pZm9ybUJ1ZmZlcihkZXZpY2UsIHVuaWZvcm1zKTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtV2l0aERlZmF1bHRzKHRyYW5zZm9ybSA9IHt9KSB7XG4gIHJldHVybiB7XG4gICAgc2hhZGVyOiB0cmFuc2Zvcm0uc2hhZGVyID8/IFwiXCIsXG4gICAgd29ya2dyb3VwU2l6ZTogdHJhbnNmb3JtLndvcmtncm91cFNpemUgPz8gWzE2LCAxNl0sXG4gICAgZGlzcGF0Y2hTY2FsZTogdHJhbnNmb3JtLmRpc3BhdGNoU2NhbGUgPz8gMSxcbiAgICBjdXN0b21EaXNwYXRjaDogdHJhbnNmb3JtLmN1c3RvbURpc3BhdGNoID8/IG51bGwsXG4gIH07XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNvbXB1dGVQaXBlbGluZShzdGF0ZSwgdHJhbnNmb3JtKSB7XG4gIGNvbnN0IGRldmljZSA9IHN0YXRlLmRldmljZTtcbiAgaWYgKCFkZXZpY2UpIHJldHVybjtcblxuICBjb25zdCB3b3JrZ3JvdXBTaXplID0gdHJhbnNmb3JtLndvcmtncm91cFNpemUgfHwgREVGQVVMVFMud29ya2dyb3VwU2l6ZTtcblxuICBjb25zdCBjb21wdXRlTW9kdWxlID0gZGV2aWNlLmNyZWF0ZVNoYWRlck1vZHVsZSh7XG4gICAgY29kZTogdHJhbnNmb3JtLnNoYWRlcixcbiAgfSk7XG5cbiAgY29uc3QgY29tcHV0ZVBpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZUNvbXB1dGVQaXBlbGluZSh7XG4gICAgbGF5b3V0OiBcImF1dG9cIixcbiAgICBjb21wdXRlOiB7XG4gICAgICBtb2R1bGU6IGNvbXB1dGVNb2R1bGUsXG4gICAgICBlbnRyeVBvaW50OiBcIm1haW5cIixcbiAgICAgIHdvcmtncm91cFNpemU6IHsgeDogd29ya2dyb3VwU2l6ZVswXSwgeTogd29ya2dyb3VwU2l6ZVsxXSB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGNvbXB1dGVCaW5kR3JvdXAgPSBkZXZpY2UuY3JlYXRlQmluZEdyb3VwKHtcbiAgICBsYXlvdXQ6IGNvbXB1dGVQaXBlbGluZS5nZXRCaW5kR3JvdXBMYXlvdXQoMCksXG4gICAgZW50cmllczogW1xuICAgICAgeyBiaW5kaW5nOiAwLCByZXNvdXJjZTogc3RhdGUuaW5wdXRUZXh0dXJlLmNyZWF0ZVZpZXcoKSB9LFxuICAgICAgeyBiaW5kaW5nOiAxLCByZXNvdXJjZTogc3RhdGUub3V0cHV0VGV4dHVyZS5jcmVhdGVWaWV3KCkgfSxcbiAgICAgIHsgYmluZGluZzogMiwgcmVzb3VyY2U6IHsgYnVmZmVyOiBzdGF0ZS51bmlmb3JtQnVmZmVyIH0gfSxcbiAgICBdLFxuICB9KTtcblxuICBzdGF0ZS5jb21wdXRlUGlwZWxpbmUgPSBjb21wdXRlUGlwZWxpbmU7XG4gIHN0YXRlLmNvbXB1dGVCaW5kR3JvdXAgPSBjb21wdXRlQmluZEdyb3VwO1xufVxuXG5hc3luYyBmdW5jdGlvbiByZW5kZXJGcmFtZShzdGF0ZSwgdHJhbnNmb3JtLCB3aWR0aCwgaGVpZ2h0KSB7XG4gIGNvbnN0IHtcbiAgICB2aWRlbyxcbiAgICB2aWRlb0NhbnZhcyxcbiAgICB2aWRlb0N0eCxcbiAgICBkZXZpY2UsXG4gICAgY29udGV4dCxcbiAgICBpbnB1dFRleHR1cmUsXG4gICAgcmVuZGVyUGlwZWxpbmUsXG4gICAgcmVuZGVyQmluZEdyb3VwLFxuICAgIGNvbXB1dGVQaXBlbGluZSxcbiAgICBjb21wdXRlQmluZEdyb3VwLFxuICB9ID0gc3RhdGU7XG5cbiAgaWYgKCF2aWRlbyB8fCB2aWRlby5yZWFkeVN0YXRlIDwgMyB8fCB2aWRlby5wYXVzZWQpIHJldHVybjtcblxuICAvLyBEcmF3IHZpZGVvIGZyYW1lIHRvIGNhbnZhc1xuICB2aWRlb0N0eC5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgaW1hZ2VCaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcCh2aWRlb0NhbnZhcyk7XG4gICAgZGV2aWNlLnF1ZXVlLmNvcHlFeHRlcm5hbEltYWdlVG9UZXh0dXJlKFxuICAgICAgeyBzb3VyY2U6IGltYWdlQml0bWFwIH0sXG4gICAgICB7IHRleHR1cmU6IGlucHV0VGV4dHVyZSB9LFxuICAgICAgW3dpZHRoLCBoZWlnaHRdLFxuICAgICk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc3QgaW1hZ2VEYXRhID0gdmlkZW9DdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgIGRldmljZS5xdWV1ZS53cml0ZVRleHR1cmUoXG4gICAgICB7IHRleHR1cmU6IGlucHV0VGV4dHVyZSB9LFxuICAgICAgaW1hZ2VEYXRhLmRhdGEsXG4gICAgICB7IGJ5dGVzUGVyUm93OiB3aWR0aCAqIDQgfSxcbiAgICAgIHsgd2lkdGgsIGhlaWdodCwgZGVwdGhPckFycmF5TGF5ZXJzOiAxIH0sXG4gICAgKTtcbiAgfVxuXG4gIC8vIEVuY29kZSBhbmQgc3VibWl0IGNvbW1hbmRzXG4gIGNvbnN0IGNvbW1hbmRFbmNvZGVyID0gZGV2aWNlLmNyZWF0ZUNvbW1hbmRFbmNvZGVyKCk7XG5cbiAgY29uc3QgY29tcHV0ZVBhc3MgPSBjb21tYW5kRW5jb2Rlci5iZWdpbkNvbXB1dGVQYXNzKCk7XG4gIGNvbXB1dGVQYXNzLnNldFBpcGVsaW5lKGNvbXB1dGVQaXBlbGluZSk7XG4gIGNvbXB1dGVQYXNzLnNldEJpbmRHcm91cCgwLCBjb21wdXRlQmluZEdyb3VwKTtcblxuICAvLyBVc2UgY3VzdG9tIGRpc3BhdGNoIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgY2FsY3VsYXRlIGJhc2VkIG9uIGRpbWVuc2lvbnMgYW5kIHNjYWxlXG4gIGNvbnN0IFt3Z1gsIHdnWV0gPSB0cmFuc2Zvcm0uY3VzdG9tRGlzcGF0Y2ggfHwgW1xuICAgIE1hdGguY2VpbCh3aWR0aCAvICh0cmFuc2Zvcm0ud29ya2dyb3VwU2l6ZVswXSAqIHRyYW5zZm9ybS5kaXNwYXRjaFNjYWxlKSksXG4gICAgTWF0aC5jZWlsKGhlaWdodCAvICh0cmFuc2Zvcm0ud29ya2dyb3VwU2l6ZVsxXSAqIHRyYW5zZm9ybS5kaXNwYXRjaFNjYWxlKSksXG4gIF07XG5cbiAgLy8gbGV0J3MgYWRkIHRoYXQ6IGlmIGRlYnVnZ2luZyBpcyBlbmFibGVkLCBsb2cgZGlzcGF0Y2ggd29ya2dyb3VwIHZhbHVlc1xuICBpZiAoc3RhdGUuZGVidWcpIHtcbiAgICBjb25zb2xlLmxvZyhgW0RFQlVHXSBEaXNwYXRjaGluZyB3b3JrZ3JvdXBzOiAoJHt3Z1h9LCAke3dnWX0pYCk7XG4gIH1cblxuICBjb21wdXRlUGFzcy5kaXNwYXRjaFdvcmtncm91cHMod2dYLCB3Z1kpO1xuICBjb21wdXRlUGFzcy5lbmQoKTtcblxuICBjb25zdCB2aWV3ID0gY29udGV4dC5nZXRDdXJyZW50VGV4dHVyZSgpLmNyZWF0ZVZpZXcoKTtcbiAgY29uc3QgcmVuZGVyUGFzcyA9IGNvbW1hbmRFbmNvZGVyLmJlZ2luUmVuZGVyUGFzcyh7XG4gICAgY29sb3JBdHRhY2htZW50czogW1xuICAgICAge1xuICAgICAgICB2aWV3LFxuICAgICAgICBjbGVhclZhbHVlOiB7IHI6IDAuMCwgZzogMC4wLCBiOiAwLjAsIGE6IDEuMCB9LFxuICAgICAgICBsb2FkT3A6IFwiY2xlYXJcIixcbiAgICAgICAgc3RvcmVPcDogXCJzdG9yZVwiLFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcbiAgcmVuZGVyUGFzcy5zZXRQaXBlbGluZShyZW5kZXJQaXBlbGluZSk7XG4gIHJlbmRlclBhc3Muc2V0QmluZEdyb3VwKDAsIHJlbmRlckJpbmRHcm91cCk7XG4gIHJlbmRlclBhc3MuZHJhdyg2LCAxLCAwLCAwKTtcbiAgcmVuZGVyUGFzcy5lbmQoKTtcblxuICBkZXZpY2UucXVldWUuc3VibWl0KFtjb21tYW5kRW5jb2Rlci5maW5pc2goKV0pO1xufVxuXG5leHBvcnQgY29uc3QgV2ViR1BVVmlkZW9WaWV3ID0gKHtcbiAgdHJhbnNmb3JtID0ge30sXG4gIHdpZHRoID0gNjQwLFxuICBoZWlnaHQgPSA0ODAsXG4gIHNob3dTb3VyY2VWaWRlbyA9IGZhbHNlLFxuICB1bmlmb3JtcyA9IHt9LFxuICBkZWJ1ZyA9IGZhbHNlLFxufSkgPT4ge1xuICBjb25zdCBjYW52YXNJZCA9IFJlYWN0LnVzZUlkKCk7XG4gIGNvbnN0IHdvcmtncm91cFNpemUgPSB0cmFuc2Zvcm0ud29ya2dyb3VwU2l6ZSB8fCBbOCwgOF07XG4gIGNvbnN0IGZyYW1lUmVmID0gUmVhY3QudXNlUmVmKG51bGwpO1xuICB0cmFuc2Zvcm0gPSB0cmFuc2Zvcm1XaXRoRGVmYXVsdHModHJhbnNmb3JtKTtcbiAgY29uc3QgdHJhbnNmb3JtUmVmID0gUmVhY3QudXNlUmVmKHRyYW5zZm9ybSk7XG4gIHRyYW5zZm9ybVJlZi5jdXJyZW50ID0gdHJhbnNmb3JtO1xuXG4gIC8vIEdyb3VwIHN0YXRlIGZvciBXZWJHUFUgYW5kIHZpZGVvLCBpbmNsdWRpbmcgdGhlIGRlYnVnIGZsYWdcbiAgY29uc3Qgd2ViZ3B1UmVmID0gUmVhY3QudXNlUmVmKHtcbiAgICB2aWRlbzogbnVsbCxcbiAgICB2aWRlb0NhbnZhczogbnVsbCxcbiAgICB2aWRlb0N0eDogbnVsbCxcbiAgICBkZXZpY2U6IG51bGwsXG4gICAgY29udGV4dDogbnVsbCxcbiAgICByZW5kZXJGb3JtYXQ6IG51bGwsXG4gICAgaW5wdXRUZXh0dXJlOiBudWxsLFxuICAgIG91dHB1dFRleHR1cmU6IG51bGwsXG4gICAgc2FtcGxlcjogbnVsbCxcbiAgICBjb21wdXRlUGlwZWxpbmU6IG51bGwsXG4gICAgY29tcHV0ZUJpbmRHcm91cDogbnVsbCxcbiAgICByZW5kZXJQaXBlbGluZTogbnVsbCxcbiAgICByZW5kZXJCaW5kR3JvdXA6IG51bGwsXG4gICAgdW5pZm9ybUJ1ZmZlcjogbnVsbCxcbiAgICBkZWJ1ZyxcbiAgfSk7XG5cbiAgLy8gU2V0dXAgdmlkZW8gY2FudmFzXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgeyB2aWRlb0NhbnZhcywgdmlkZW9DdHgsIGNsZWFudXAgfSA9IHNldHVwVmlkZW9DYW52YXMoXG4gICAgICB3aWR0aCxcbiAgICAgIGhlaWdodCxcbiAgICAgIHNob3dTb3VyY2VWaWRlbyxcbiAgICApO1xuICAgIHdlYmdwdVJlZi5jdXJyZW50LnZpZGVvQ2FudmFzID0gdmlkZW9DYW52YXM7XG4gICAgd2ViZ3B1UmVmLmN1cnJlbnQudmlkZW9DdHggPSB2aWRlb0N0eDtcbiAgICByZXR1cm4gY2xlYW51cDtcbiAgfSwgW3dpZHRoLCBoZWlnaHQsIHNob3dTb3VyY2VWaWRlb10pO1xuXG4gIC8vIEluaXRpYWxpemUgV2ViR1BVIHJlc291cmNlcyBhbmQgc3RhcnQgcmVuZGVyaW5nXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XG4gICAgc2V0dXBXZWJHUFVSZXNvdXJjZXMod2ViZ3B1UmVmLmN1cnJlbnQsIHtcbiAgICAgIHdpZHRoLFxuICAgICAgaGVpZ2h0LFxuICAgICAgY2FudmFzSWQsXG4gICAgICB1bmlmb3JtcyxcbiAgICB9KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAvLyBBZnRlciBpbml0aWFsIHNldHVwLCBjcmVhdGUgdGhlIGNvbXB1dGUgcGlwZWxpbmUgZnJvbSB0aGUgcHJvdmlkZWQgc2hhZGVyLlxuICAgICAgICB1cGRhdGVDb21wdXRlUGlwZWxpbmUod2ViZ3B1UmVmLmN1cnJlbnQsIHRyYW5zZm9ybSk7XG4gICAgICAgIGNvbnN0IGFuaW1hdGUgPSAoKSA9PiB7XG4gICAgICAgICAgZnJhbWVSZWYuY3VycmVudCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcbiAgICAgICAgICByZW5kZXJGcmFtZSh3ZWJncHVSZWYuY3VycmVudCwgdHJhbnNmb3JtUmVmLmN1cnJlbnQsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9O1xuICAgICAgICBhbmltYXRlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiU2V0dXAgZmFpbGVkOlwiLCBlcnJvcik7XG4gICAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAoZnJhbWVSZWYuY3VycmVudCkge1xuICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZVJlZi5jdXJyZW50KTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgdmlkZW8sIGlucHV0VGV4dHVyZSwgb3V0cHV0VGV4dHVyZSwgdW5pZm9ybUJ1ZmZlciB9ID1cbiAgICAgICAgd2ViZ3B1UmVmLmN1cnJlbnQ7XG4gICAgICBpZiAodmlkZW8/LnNyY09iamVjdCkge1xuICAgICAgICB2aWRlby5zcmNPYmplY3QuZ2V0VHJhY2tzKCkuZm9yRWFjaCgodHJhY2spID0+IHRyYWNrLnN0b3AoKSk7XG4gICAgICB9XG4gICAgICBpbnB1dFRleHR1cmU/LmRlc3Ryb3koKTtcbiAgICAgIG91dHB1dFRleHR1cmU/LmRlc3Ryb3koKTtcbiAgICAgIHVuaWZvcm1CdWZmZXI/LmRlc3Ryb3koKTtcbiAgICB9O1xuICB9LCBbd2lkdGgsIGhlaWdodCwgY2FudmFzSWRdKTtcblxuICAvLyBVcGRhdGUgY29tcHV0ZSBwaXBlbGluZSBpZiB0cmFuc2Zvcm0gY2hhbmdlcyB3aXRob3V0IHJlc3RhcnRpbmcgZXZlcnl0aGluZ1xuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh3ZWJncHVSZWYuY3VycmVudC5kZXZpY2UpIHtcbiAgICAgIHVwZGF0ZUNvbXB1dGVQaXBlbGluZSh3ZWJncHVSZWYuY3VycmVudCwgdHJhbnNmb3JtKTtcbiAgICB9XG4gIH0sIFt0cmFuc2Zvcm0uc2hhZGVyLCAuLi53b3JrZ3JvdXBTaXplXSk7XG5cbiAgLy8gVXBkYXRlIHVuaWZvcm1zIG9uIGNoYW5nZSB1c2luZyBoZWxwZXIgZnVuY3Rpb25cbiAgUmVhY3QudXNlRWZmZWN0KCgpID0+IHtcbiAgICB1cGRhdGVVbmlmb3JtQnVmZmVyKFxuICAgICAgd2ViZ3B1UmVmLmN1cnJlbnQuZGV2aWNlLFxuICAgICAgd2ViZ3B1UmVmLmN1cnJlbnQudW5pZm9ybUJ1ZmZlcixcbiAgICAgIHVuaWZvcm1zLFxuICAgICk7XG4gIH0sIFt1bmlmb3Jtc10pO1xuXG4gIHJldHVybiBodG1sKFtcImNhbnZhc1wiLCB7IGlkOiBjYW52YXNJZCwgd2lkdGgsIGhlaWdodCB9XSk7XG59O1xuIiwicmVmZXJfYWxsIjp0cnVlfV0sImFuaW1hdGVCeSI6W10sImRpc3BsYXlfYXMiOiJ3aWRnZXQiLCJkZXYiOmZhbHNlLCJkZWZhdWx0cyI6e319AAAA
    </script>

    <script type="module">
        import { render, parseColightScript } from "https://cdn.jsdelivr.net/npm/@colight/core/dist/widget.mjs";
        const container = document.getElementById('colight-widget-d506f5b728294f9687415a048dc2abd7');
        const colightData = parseColightScript(container.nextElementSibling);
        render(container, colightData, 'colight-widget-d506f5b728294f9687415a048dc2abd7');
    </script>
    
    </body>
    </html>
    